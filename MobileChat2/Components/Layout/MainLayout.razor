@using Microsoft.AspNetCore.SignalR.Client
@inherits LayoutComponentBase

<MudThemeProvider />
<MudDialogProvider FullWidth="true" MaxWidth="MaxWidth.Medium" />
<MudSnackbarProvider />

<MudLayout>
	<MudLayout>
		<NavMenu />

		<MudMainContent>
			<MudContainer>
				<CascadingValue Value="hubConnection">
					@Body
				</CascadingValue>
			</MudContainer>
		</MudMainContent>
	</MudLayout>
</MudLayout>

@code
{
	private HubConnection hubConnection;

	public bool IsConnected => hubConnection.State == HubConnectionState.Connected;

	protected override Task OnInitializedAsync()
	{
		hubConnection = new HubConnectionBuilder().WithUrl("http://localhost:5149/chat").Build();
		hubConnection.StartAsync();

		return Task.CompletedTask;
	}
}